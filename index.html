<!DOCTYPE html>
<html lang="en">
  
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content=
    "width=device-width, initial-scale=1.0">
    <style>
        #count{
            opacity: 1;
        }
        #round{
            opacity:1;
            
        }
        #answer{
            opacity: 0;
            font-size: xx-large;
        }
        #demo{
            opacity: 0;
            vertical-align: middle;
        }
        #submit{
            opacity: 0;
            vertical-align: middle;
        }
        #in{
            opacity: 0;
            vertical-align: middle;
        }
        input{
            width: 2ch;
            box-sizing: content-box;
            background: transparent;
            border: none;
            border-bottom: 1px solid #000;
            font-size: xx-large;
            text-align: center;
            margin: 5px;
        }
        p{
            color: rgb(255, 17, 0);
        }
    </style>
    
</head>
  
<body style="text-align: center; background-image: url('file:///C:/Users/sidan/Downloads/images.jpg'); background-repeat: no-repeat; background-attachment: fixed;
background-size: cover; text-decoration: aqua; font-size: 50px;" id="body">
    <script>
        const api_url = 
              "https://foodish-api.herokuapp.com/api/";
          
        // Defining async function
        async function getapi(url) {
            
            // Storing response
            const response = await fetch(url);
            
            // Storing data in form of JSON
            var data = await response.json();
            console.log(data);
            soln(data);
        } 
        var l='';         
          getapi(api_url);
          
          
          // Function to define innerHTML for HTML table
          var arr=new Array();
                var inp=new Array();
                var u=0;
          function soln(data) {
              let string = data.image;
                const usingSplit = string.split('');
                const usingSpread = [...string];
                const usingArrayFrom = Array.from(string);
                const usingObjectAssign = Object.assign([], string);
                
                for(var i=0;usingObjectAssign[41+i]!='/';i++){
        
                    arr[i]=usingObjectAssign[41+i];
                    l+=arr[i];
                }
                console.log(arr);
              let tab = 
                  `<img src="${data.image}" width=600 length=400 style="align:middle;margin:0px 50px"></img>`

              document.getElementById("demo").innerHTML = tab;
              for(var i=0;i<arr.length;i++){
                  var n=0;
                  var t;
                  if(arr[i]=='a'||arr[i]=='e'||arr[i]=='i'||arr[i]=='o'||arr[i]=='u'||arr[i]=='-'){
                        t=`${arr[i]}`
                  }else{
                    t=`<input type="text" maxlength="1" id="${arr[i]}">`
                    n+=1;
                    u+=1;
                  }
                  console.log(i);
                  document.getElementById("answer").innerHTML += t;
                  
                }
              
                
                
            }
            
            function answerinp(){
                document.getElementById("")
                var flag=0;
                var t=0;
                for(var i=0;i<arr.length;i++){
                    if(arr[i]=='a'||arr[i]=='e'||arr[i]=='i'||arr[i]=='o'||arr[i]=='u'||arr[i]=='-'){
                        inp[i]=arr[i];
                    }else{
                        inp[i]=document.getElementById(arr[i]);
                        console.log(arr[i]);
                        t+=1;
                        if((arr[i])!=inp[i].value){
                            flag=1;
                        }
                    }
                   
                }
                console.log("blanks: "+u)
                let r=`<p>Oh NOO!! it was ${l}</p>`
                let s=`<p>Yes it is ${l},</p>`
                let y=`<p id="p">You helped in preventing SpongeBob and pattrick's feast form getting spoiled.</p>`
                    document.getElementById("answer").style.opacity=0;
                    document.getElementById("submit").style.opacity=0;
                if(flag==0){
                    document.getElementById("demo").innerHTML = s;
                    document.getElementById("demo").innerHTML +=y;
                }else{
                    document.getElementById("in").innerHTML=r;
                }
                console.log(inp);
                clearTimeout(interval);
                if(flag==0){
                    var score=1000*count/15*t;
                    score=Math.round(score);
                    
                }
                else{
                    var score=0;
                    
                }
                document.getElementById("count").innerHTML = "Your score is: "+score;
            }
         
            var interval;
            var count = 20;
            function timer(){
                
                document.getElementById("body").style.backgroundImage = "url('file:///C:/Users/sidan/Downloads/images(1).png')";
                
                document.getElementById("demo").style.opacity = 1;
                
                document.getElementById("in").style.opacity = 1;
                document.getElementById("round").style.opacity = 0;
                interval = setInterval(function(){
                document.getElementById('count').innerHTML="Time Remaining: "+ count;
                count--;
                if(count==15){
                    document.getElementById("body").style.backgroundImage = "url('file:///C:/Users/sidan/Downloads/images(2).png')";
                    document.getElementById("answer").style.opacity = 1;
                    document.getElementById("submit").style.opacity = 1;

                }
                if (count === 0){
                    clearInterval(interval);
                    
                    alert("You're out of time! Your score is : 0");
                }
                }, 1000);
            }
            
         
        
            </script>
        
    <div id="round"><h1>SpongeBob in need</h1><h4>SpongeBob and pattrick were going to restaurant to enjoy their friendship,<br>but plankton overheard their discussion and had caused disperancies with the menu of the restaurant </h4>
        <br><img src="file:///C:/Users/sidan/Downloads/download.jpg">
        <h4>Now they are only able to see the image of the dish and some of the letters from the name of dish,<br>enter the missing alphabets and help them enjoy their feast</h4><h4>And the another problem is the image of dish switches after every 20 sec and pattrick takes 5 sec to decide to wether order it or not if yes then he asks what the dish is,So you have 15 sec for guessing the image using hints.</h4></div>        
    <div id="count" onclick="timer()"><button>start</button></div>       
    <div id="demo"></div>
    <div id="answer"></div>
    <div id="ins"></div>
    <br><br>
    <div id="submit"><button onclick="answerinp()">submit</button></div>
    <div id="in"></div>
    
</body>
  
</html>
